---
date: 2014-11-04 10:13:47
template: tech.jade
title: Ext4 fs feature
category: Linux
chage_frequency: monthly
tag: fs,ext4,Linux
---
<ol>
<li>Block 大小可定，但是不应该大于PageSize（一般4k）,否则可能会有问题。建议4k
</li>
<li>Block 组织为BlockGroup 大小128M 32768个block。
</li>
<li>文件系统由多个blockGroup顺序组成
</li>
<li>每个blockGroup内部是一个类似ext3的文件系统结构：
<ul>
<li>SuperBLock
</li>
<li>inodeBitMap
</li>
<li>Inode Block List
</li>
<li>blockBitMap
</li>
<li>data Bock List
</li>
</ul>

</li>
<li>Fixed Block<br/>
   多个blockGroup组成一个固定长度的blockGroup的组，组内的第一个BlockGroup 携带了除本group外的其余3个blockGroup的元数据信息。这起到了快速访问和冗余的作用。
</li>
<li>bigAlloce<br/>
   允许进行大块分配，通过多个block组成cluster的形式，这样的话一个bitMap就对应了一个cluster，分配和释放都以cluster为单位。目前还支持不是很好。
</li>
<li>Multialloce<br/>
   在分配很大空间的时候可以一次分配多个块，避免重复地调用
</li>
<li>inlineData<br/>
   可以将数据放在inode中，当数据很少的时候
</li>
<li>查看文件系统信息（从磁盘读取）工具<br/>
   dumpe2fs

</li>
<li>文件寻址快
<ul>
<li>extent 分配128M
</li>
<li>extent tree，查找快速
</li>
</ul>

</li>
</ol>


<p>
<a href="https://ext4.wiki.kernel.org/index.php/Ext4_Disk_Layout">Link</a>
</p>